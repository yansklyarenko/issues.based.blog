<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Blog</title>
    <script>
        async function loadPosts() {
            const postsContainer = document.getElementById("posts");
            postsContainer.innerHTML = "Loading...";

            try {
                const response = await fetch("posts/");
                const text = await response.text();

                // Extract links to HTML files
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, "text/html");
                const links = [...doc.querySelectorAll("a[href$='.html']")].map(a => a.href);

                postsContainer.innerHTML = ""; // Clear loading text

                for (const link of links) {
                    const postResponse = await fetch(link);
                    const postText = await postResponse.text();
                    const postDoc = parser.parseFromString(postText, "text/html");
                    const title = postDoc.querySelector("h1")?.textContent || "Untitled Post";

                    const postItem = document.createElement("li");
                    postItem.innerHTML = `<a href="${link}">${title}</a>`;
                    postsContainer.appendChild(postItem);
                }
            } catch (error) {
                postsContainer.innerHTML = "Failed to load posts.";
                console.error(error);
            }
        }

        window.onload = loadPosts;
    </script>
</head>
<body>
    <h1>My Blog</h1>
    <p>Welcome to my blog! Here you'll find posts converted from GitHub Issues.</p>

    <ul id="posts">
        <!-- Blog post links will be inserted here -->
    </ul>
</body>
</html>
